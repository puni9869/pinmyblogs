{{ define "widget/search" }}
<div class="flex w-full justify-center item-center">
  <!-- ================= MOBILE ================= -->
  <details class="group relative" id="mobile-search">
    <!-- Icon only trigger -->
    <summary class="list-none cursor-pointer">
      <div class="gap-2 py-2 font-large text-white h-10 w-30 rounded-full bg-black focus:bg-zinc-900 border border-zinc-700 text-zinc-100 placeholder-zinc-400 focus:outline-none flex flex-row items-center justify-center text-white transition active:scale-95">
        <!-- Magnifier Lens Icon â€“ Complete SVG -->
        <svg xmlns="http://www.w3.org/2000/svg"
             class="h-5 w-5"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor"
             stroke-width="2">
          <!-- Lens circle + handle -->
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.75 3.5a7.25 7.25 0 1 1 0 14.5 7.25 7.25 0 0 1 0-14.5Z M21 21l-4.35-4.35" />
        </svg>
        <p class="text-sm">Search</p>
      </div>
    </summary>
    <!-- Drawer form -->
    <form action="/search"
          method="get"
          class="bg-white rounded-2xl border border-gray-200 shadow-2xl p-3 space-y-2">
      <label class="text-xs text-gray-400 px-2">Search</label>
      <input id="q"
             type="text"
             name="q"
             value="{{ if .SearchQuery }}{{ .SearchQuery | html }}{{ end }}"
             placeholder="Search links or #tags"
             class="w-full rounded-full bg-gray-50 border border-gray-300 px-4 py-2.5 mt-1 text-sm text-gray-900 transition focus:bg-white focus:border-indigo-600 focus:ring-2 focus:ring-indigo-500/30 focus:outline-none"
             autocomplete="on" />
      <!-- ---- #TAG QUICK CHIPS ---- -->
      {{ if .SuggestedTags }}
      <div class="px-1 flex flex-wrap gap-1.5">
        {{ range .SuggestedTags }}
        <button type="button"
                onclick="this.form.q.value += ' #{{.}}'"
                class="bg-indigo-50 text-indigo-700 text-xs px-2.5 py-1 rounded-full border border-indigo-200 transition active:scale-95 whitespace-nowrap">
          #{{.}}
        </button>
        {{ end }}
      </div>
      {{ end }}
      <!-- ---- RECENT SEARCHES SECTION ---- -->
      {{ if .RecentSearches }}
      <div class="bg-gray-50 rounded-xl p-2">
        <p class="text-xs text-gray-400 px-1 mb-1">Recent</p>
        <div class="flex flex-wrap gap-1.5">
          {{ range .RecentSearches }}
          <button type="submit"
                  onclick="this.form.q.value='{{. | html}}'"
                  class="bg-white text-gray-700 text-xs px-2.5 py-1 rounded-full border border-gray-200 shadow-sm transition active:scale-95">
            {{.}}
          </button>
          {{ end }}
        </div>
      </div>
      {{ end }}
      <!-- ---- MOBILE ONLY SUBMIT BUTTON ---- -->
      <button type="submit"
              class="sm:hidden w-full bg-indigo-600 text-white rounded-full py-2.5 text-sm shadow-md active:scale-95 transition">
        Search
      </button>
    </form>
  </details>
</div>
{{ end }}
